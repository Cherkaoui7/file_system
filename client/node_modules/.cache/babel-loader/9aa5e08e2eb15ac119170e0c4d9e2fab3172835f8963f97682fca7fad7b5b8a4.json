{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\chatgpt_gemini_project\\\\gemini_version\\\\advanced-file-system\\\\client\\\\src\\\\components\\\\BatchUpload.jsx\",\n  _s = $RefreshSig$();\n// client/src/components/BatchUpload.jsx\nimport { useState } from 'react';\nimport { uploadFiles } from '../api/files'; // Import from the file above\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BatchUpload = ({\n  userToken\n}) => {\n  _s();\n  // <--- Receive token as prop\n  const [files, setFiles] = useState([]);\n  const [progress, setProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n  const [message, setMessage] = useState('');\n  const handleUpload = async () => {\n    if (!files || files.length === 0) return alert(\"Please select files first\");\n    const formData = new FormData();\n    // Loop through files and append them to 'files' (plural name matches backend!)\n    for (let i = 0; i < files.length; i++) {\n      formData.append('files', files[i]);\n    }\n    setMessage('‚úÖ Batch Upload Complete!');\n\n    // üëá ADD THIS LINE:\n    if (props.onUploadSuccess) props.onUploadSuccess();\n    setIsUploading(false);\n    try {\n      setIsUploading(true);\n      setProgress(0);\n      setMessage('');\n\n      // Call the API function\n      await uploadFiles(formData, userToken, percent => {\n        setProgress(percent);\n      });\n      setMessage('‚úÖ Batch Upload Complete!');\n      setIsUploading(false);\n      setTimeout(() => setProgress(0), 3000); // Reset bar after 3s\n    } catch (error) {\n      console.error(error);\n      setMessage('‚ùå Upload Failed');\n      setIsUploading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-800 rounded-xl text-white max-w-md mx-auto mt-10 shadow-lg border border-gray-700\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-bold mb-4\",\n      children: \"Batch Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      multiple: true,\n      onChange: e => setFiles(e.target.files),\n      className: \"block w-full text-sm text-gray-400\\r file:mr-4 file:py-2 file:px-4\\r file:rounded-full file:border-0\\r file:text-sm file:font-semibold\\r file:bg-blue-600 file:text-white\\r hover:file:bg-blue-700\\r mb-4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      disabled: isUploading,\n      className: `w-full py-2 px-4 rounded font-bold transition-all ${isUploading ? 'bg-gray-600 cursor-not-allowed' : 'bg-green-500 hover:bg-green-600'}`,\n      children: isUploading ? `Uploading... ${progress}%` : 'INITIATE UPLOAD'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full bg-gray-700 rounded-full h-4 mt-4 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-400 h-4 rounded-full transition-all duration-300 ease-out\",\n        style: {\n          width: `${progress}%`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-3 text-center font-medium\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(BatchUpload, \"HxJmP7pZnsRYAVbZmXoTQ28gTII=\");\n_c = BatchUpload;\nexport default BatchUpload;\nvar _c;\n$RefreshReg$(_c, \"BatchUpload\");","map":{"version":3,"names":["useState","uploadFiles","jsxDEV","_jsxDEV","BatchUpload","userToken","_s","files","setFiles","progress","setProgress","isUploading","setIsUploading","message","setMessage","handleUpload","length","alert","formData","FormData","i","append","props","onUploadSuccess","percent","setTimeout","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","multiple","onChange","e","target","onClick","disabled","style","width","_c","$RefreshReg$"],"sources":["C:/Users/USER/Documents/chatgpt_gemini_project/gemini_version/advanced-file-system/client/src/components/BatchUpload.jsx"],"sourcesContent":["// client/src/components/BatchUpload.jsx\r\nimport { useState } from 'react';\r\nimport { uploadFiles } from '../api/files'; // Import from the file above\r\n\r\nconst BatchUpload = ({ userToken }) => { // <--- Receive token as prop\r\n    const [files, setFiles] = useState([]);\r\n    const [progress, setProgress] = useState(0);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleUpload = async () => {\r\n        if (!files || files.length === 0) return alert(\"Please select files first\");\r\n\r\n        const formData = new FormData();\r\n        // Loop through files and append them to 'files' (plural name matches backend!)\r\n        for (let i = 0; i < files.length; i++) {\r\n            formData.append('files', files[i]);\r\n        }\r\n        setMessage('‚úÖ Batch Upload Complete!');\r\n      \r\n      // üëá ADD THIS LINE:\r\n      if (props.onUploadSuccess) props.onUploadSuccess(); \r\n\r\n      setIsUploading(false);\r\n\r\n        try {\r\n            setIsUploading(true);\r\n            setProgress(0);\r\n            setMessage('');\r\n\r\n            // Call the API function\r\n            await uploadFiles(formData, userToken, (percent) => {\r\n                setProgress(percent);\r\n            });\r\n\r\n            setMessage('‚úÖ Batch Upload Complete!');\r\n            setIsUploading(false);\r\n            setTimeout(() => setProgress(0), 3000); // Reset bar after 3s\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n            setMessage('‚ùå Upload Failed');\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 bg-gray-800 rounded-xl text-white max-w-md mx-auto mt-10 shadow-lg border border-gray-700\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Batch Upload</h2>\r\n\r\n            {/* File Input */}\r\n            <input\r\n                type=\"file\"\r\n                multiple\r\n                onChange={(e) => setFiles(e.target.files)}\r\n                className=\"block w-full text-sm text-gray-400\r\n          file:mr-4 file:py-2 file:px-4\r\n          file:rounded-full file:border-0\r\n          file:text-sm file:font-semibold\r\n          file:bg-blue-600 file:text-white\r\n          hover:file:bg-blue-700\r\n          mb-4\"\r\n            />\r\n\r\n            {/* Upload Button */}\r\n            <button\r\n                onClick={handleUpload}\r\n                disabled={isUploading}\r\n                className={`w-full py-2 px-4 rounded font-bold transition-all ${isUploading\r\n                        ? 'bg-gray-600 cursor-not-allowed'\r\n                        : 'bg-green-500 hover:bg-green-600'\r\n                    }`}\r\n            >\r\n                {isUploading ? `Uploading... ${progress}%` : 'INITIATE UPLOAD'}\r\n            </button>\r\n\r\n            {/* Progress Bar Container */}\r\n            {isUploading && (\r\n                <div className=\"w-full bg-gray-700 rounded-full h-4 mt-4 overflow-hidden\">\r\n                    <div\r\n                        className=\"bg-green-400 h-4 rounded-full transition-all duration-300 ease-out\"\r\n                        style={{ width: `${progress}%` }}\r\n                    ></div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Status Message */}\r\n            {message && <p className=\"mt-3 text-center font-medium\">{message}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BatchUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}